# Mengaktifkan rewrite engine
RewriteEngine On

# Redirect semua request ke index.php jika file atau folder tidak ada
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php [QSA,L]

# Melindungi file sensitif
<Files ~ "^.*\.([Ee][Nn][Vv]|[Jj][Ss][Oo][Nn])">
    Order allow,deny
    Deny from all
    Satisfy all
</Files>

# Melindungi folder data
<Directory "/quiz/data">
    Order deny,allow
    Deny from all
</Directory>

# Melindungi folder includes
<Directory "/quiz/includes">
    Order deny,allow
    Deny from all
</Directory>

# Kompresi untuk performa
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/javascript application/json
</IfModule>

# Cache control untuk static resources
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/pdf "access plus 1 month"
    ExpiresByType text/javascript "access plus 1 month"
    ExpiresByType text/html "access plus 600 seconds"
    ExpiresByType application/javascript "access plus 1 month"
</IfModule>